# CDN (Content Delivery Network) 内容分发网络

## CDN 回源策略

> 当用户访问一个 url 的时候，如果被解析到的那个 CDN 节点没有缓存需要响应的内容，或者说缓存到期了，就会回源站去获取。如果没有人访问，那么 CDN 节点是不会主动去源站拿的。

> 通常情况下，是直接用ip进行回源的，但是如果客户源站有多个ip，并且ip地址会经常变化，对于cdn厂商来说，为了避免经常更改配置（回源ip），会采用域名回源方式进行回源，这样即使源站的ip变化了，也不影响原有的配置。

## 什么是域名回源？

> 域名回源就是搜索引擎的蜘蛛在爬行的过程中直接抓取源地址上的内容而不是存在各个节点（CDN）上的缓存内容。

## 如何配置？

> 源站和回源HOST的区别：

源站：源站决定了回源时请求到的具体IP地址。
回源HOST：回源HOST决定了回源请求访问到该IP地址上的具体站点。
回源HOST即回源域名，当源站服务器上提供多个域名服务时，CDN节点回源时在源站访问的具体站点域名。

- 例子一：源站是域名【域名回源】

如果源站为 www.a.com，回源 HOST 为www.b.com。那么实际回源是请求到 www.a.com 解析到的 IP 地址其对应主机上的 www.b.com 站点。

- 例子二：源站是IP地址【ip回源】

源站为1.1.1.1，回源 HOST 为 www.b.com。那么实际回源的是1.1.1.1对应主机上的 www.b.com 站点。

## cdn 部署
